# **************************************************************************** #
#                                    Colors                                    #
# **************************************************************************** #

C_STD = \033[0;39m
C_GRAY = \033[0;90m
C_RED = \033[0;91m
C_GREEN = \033[0;92m
C_YELLOW = \033[0;93m
C_BLUE = \033[0;94m
C_MAGENTA = \033[0;95m
C_CYAN = \033[0;96m
C_WHITE = \033[0;97m

# **************************************************************************** #
#                                    Names                                     #
# **************************************************************************** #

EXEC		= push_swap
ARQUIVE		= binary.a
LIBFT		= $(LIBFT_PATH)libft.a

# **************************************************************************** #
#                                    Git                                       #
# **************************************************************************** #

LIBFT_URL	= https://github.com/Denionline/Libft.git

# **************************************************************************** #
#                                    Path's                                    #
# **************************************************************************** #

INC			= include
LIBFT_PATH	= $(INC)/libft/

FILES		+= main
FILES		+= push_swap
FILES		+= sn
FILES		+= ss
FILES		+= pn
FILES		+= rn
FILES		+= rr
FILES		+= rrn
FILES		+= rrr
FILES		+= calc_moves
FILES		+= rotates
FILES		+= better_array

SRC_FILES	= $(addprefix ./, $(FILES))
SRCS		= $(addprefix ./, $(addsuffix .c, $(SRC_FILES)))
OBJS		= $(addprefix ./, $(addsuffix .o, $(SRC_FILES)))

# **************************************************************************** #
#                                  Compiler                                    #
# **************************************************************************** #

CC			= cc
CFLAGS		= -Wall -Werror -Wextra
AR			= ar rcs
MAKE		= make --no-print-directory

# **************************************************************************** #
#                                    Tests                                     #
# **************************************************************************** #

TEST1		= "288 353 459 99 153 71 375 341 344 23 57 190 441 308 154 143 257 150 30 70 332 490 65 231 286 479 464 400 402 295 495 239 139 229 496 136 322 397 185 222 305 22 98 132 401 37 58 49 381 252 160 202 262 351 232 242 312 384 357 188 368 376 347 473 416 187 366 302 47 122 320 446 159 410 450 481 33 407 313 296 88 110 104 468 484 398 482 439 151 432 317 294 458 250 494 223 50 210 114 271 355 393 498 123 195 237 212 106 5 399 27 238 35 126 404 335 193 9 264 3 8 100 66 377 457 44 358 102 124 82 76 254 203 260 433 420 329 78 241 442 116 290 455 453 79 390 426 267 323 85 454 176 284 19 321 192 448 225 251 415 346 80 374 12 378 306 474 207 336 147 213 334 339 166 391 138 348 409 167 6 298 388 72 277 16 354 133 477 118 387 119 463 318 224 120 41 500 424 83 253 480 129 156 164 472 246 131 297 436 273 478 425 301 158 15 63 276 451 405 165 103 130 345 145 48 299 178 177 278 162 275 430 444 233 14 285 142 356 105 259 29 270 423 38 96 174 289 60 483 240 303 434 121 28 445 330 291 470 385 13 487 183 367 396 199 429 328 283 4 209 107 117 40 141 422 349 469 319 34 69 169 152 157 325 245 266 340 55 219 112 372 53 25 386 247 18 279 227 449 411 488 113 90 235 168 489 182 45 95 413 331 125 230 115 365 492 465 214 383 144 244 54 59 67 140 179 175 261 280 316 460 91 7 137 274 361 236 360 485 440 148 352 343 287 184 363 370 97 221 218 24 380 52 461 155 204 437 206 311 73 81 215 191 395 263 476 486 342 466 111 186 452 418 93 46 101 281 499 220 134 272 2 307 64 269 181 171 315 421 389 248 249 403 467 1 84 86 17 194 417 362 205 338 173 77 412 109 475 94 39 256 406 196 75 108 11 128 172 304 324 243 428 491 394 211 217 414 333 51 309 201 326 435 32 359 300 497 200 42 61 149 493 228 268 293 234 350 431 43 373 471 456 197 208 31 382 371 462 36 327 258 292 314 92 170 392 408 337 87 56 379 438 216 189 163 68 369 127 20 226 161 282 26 255 180 89 74 427 198 62 443 364 310 10 265 447 21 135 419 146"
TEST2		= "452 215 153 224 433 289 62 81 69 6 500 443 404 372 446 14 84 457 185 305 80 86 290 467 72 238 434 308 342 316 50 94 136 247 143 299 275 405 473 16 361 462 67 32 242 37 20 100 309 45 498 123 381 60 83 97 444 322 248 323 495 437 357 150 66 151 22 11 250 190 402 43 422 104 375 116 235 176 120 117 265 41 58 366 79 469 420 413 456 346 418 204 59 172 194 95 223 227 435 353 125 310 400 464 479 75 237 18 439 449 126 279 411 436 73 492 349 278 49 155 206 394 385 211 332 175 77 35 221 70 236 285 170 465 184 386 369 39 272 245 348 102 382 451 61 445 280 295 397 478 277 358 371 320 360 110 493 480 421 4 470 239 409 26 398 111 87 52 149 407 131 442 258 259 207 428 30 24 476 132 55 306 370 63 379 226 92 284 203 141 283 199 98 430 167 21 183 129 193 152 220 109 208 377 19 441 113 453 373 23 249 378 91 287 304 256 219 364 483 486 472 312 115 391 269 450 356 424 34 393 253 217 252 165 2 459 432 246 96 491 325 475 103 392 416 438 408 134 489 47 17 99 222 154 244 362 180 463 121 499 293 105 389 390 228 329 27 401 48 251 367 440 254 334 161 36 351 313 101 488 135 368 130 234 122 68 158 261 166 281 12 315 133 51 127 301 144 93 326 182 431 341 374 156 399 384 458 296 159 255 339 240 497 297 288 335 229 264 205 209 485 57 157 195 273 78 88 90 15 177 350 303 477 260 112 354 417 197 328 481 410 3 76 274 1 212 241 262 146 74 365 496 142 56 468 187 324 179 124 415 46 282 455 291 138 85 344 429 419 266 423 460 387 347 9 214 271 484 31 461 474 89 168 380 425 327 201 359 448 454 337 403 318 466 44 314 340 178 140 395 447 163 230 213 164 196 29 7 64 233 276 54 412 118 186 319 188 13 471 40 268 414 396 343 82 243 333 10 490 307 345 363 171 376 292 108 192 298 388 294 147 189 311 5 338 65 181 383 200 8 270 216 336 487 191 106 355 302 119 162 482 406 145 42 137 267 107 38 232 231 331 263 330 218 286 300 202 28 210 427 148 169 321 139 198 352 257 25 33 53 174 494 173 426 114 71 225 128 160 317"
TEST3		= "356 483 191 224 34 281 229 28 316 391 104 257 330 371 122 18 267 305 474 73 269 464 374 128 230 436 91 223 337 157 46 287 450 432 310 456 189 442 489 495 237 42 166 241 183 302 360 226 410 38 465 148 319 169 116 109 406 370 286 388 445 65 194 253 491 149 198 184 349 126 93 394 308 438 61 207 84 243 120 244 87 227 21 96 467 429 20 216 399 282 57 327 124 159 58 208 334 462 382 228 460 342 86 214 297 338 161 99 139 210 441 209 260 485 176 395 328 333 72 105 448 412 363 29 293 103 336 71 295 59 232 147 10 418 347 274 106 131 196 48 146 40 62 185 41 67 466 92 76 500 312 352 484 246 325 390 199 291 447 453 383 89 408 81 193 409 213 355 242 425 121 134 220 270 405 90 156 233 378 217 254 49 68 397 256 478 346 339 205 280 69 482 44 130 2 414 420 1 386 53 292 361 332 266 289 234 192 262 299 387 19 138 54 153 306 83 344 108 379 142 3 50 471 171 7 55 150 110 463 313 285 219 164 100 368 141 160 403 145 454 240 423 114 271 431 498 135 479 97 36 283 37 362 472 294 345 323 358 12 321 173 404 326 64 203 470 490 458 4 250 225 461 457 258 75 440 255 245 459 315 151 127 249 393 433 311 341 430 402 180 158 174 79 222 421 284 279 66 77 95 444 475 340 497 32 413 435 133 367 353 468 102 487 201 168 52 276 144 107 314 481 303 354 373 6 39 188 82 304 496 275 273 175 182 132 428 398 88 364 80 197 380 439 469 137 424 381 417 494 78 322 154 70 411 119 11 335 427 23 16 476 385 51 415 167 14 155 172 329 56 351 300 343 350 236 30 113 261 477 212 298 94 33 384 35 372 301 63 26 443 204 98 17 202 248 416 179 27 129 24 13 186 252 25 296 165 187 452 401 492 307 264 45 163 499 437 277 181 22 426 74 195 365 290 112 265 259 488 235 251 480 143 177 324 320 278 272 318 400 376 407 118 377 152 422 206 231 170 359 309 369 221 190 396 375 389 449 455 493 85 473 446 200 218 115 125 263 101 419 178 162 247 392 5 60 434 451 348 239 111 331 123 136 288 15 140 43 215 211 9 357 486 47 317 8 238 366 268 117 31"
TEST4		= "406 332 376 74 47 361 296 148 146 228 207 186 70 460 243 403 188 395 496 364 87 35 492 161 486 221 29 234 73 214 308 292 136 94 426 385 336 326 28 65 480 225 407 380 169 248 17 497 13 421 20 180 175 482 103 144 194 479 143 33 275 162 49 210 264 378 199 153 60 429 167 399 435 113 356 352 92 450 78 433 288 96 55 269 102 5 93 209 274 51 409 151 183 250 126 211 299 224 431 98 499 304 187 4 289 473 170 284 184 322 471 278 22 261 67 268 116 439 147 315 347 317 298 68 10 41 235 462 195 165 76 458 173 168 62 6 447 267 411 69 442 372 319 125 229 307 491 440 384 112 283 316 271 477 412 441 249 172 86 64 53 286 202 27 191 360 305 128 342 137 280 190 430 77 484 196 350 293 383 238 109 201 40 111 131 75 117 373 258 206 302 21 150 163 19 97 398 141 404 256 80 236 488 83 34 468 402 405 226 82 381 216 276 311 39 388 392 1 193 72 379 46 138 457 282 475 58 394 390 413 391 335 245 365 489 177 101 32 66 277 241 246 418 91 220 453 382 396 436 478 498 469 178 239 18 139 369 339 120 318 124 44 142 130 247 387 208 481 237 56 400 420 461 300 437 154 495 15 9 363 371 464 287 434 374 428 253 446 198 140 90 341 145 329 182 410 63 330 251 215 8 262 294 222 370 171 159 189 423 244 252 230 463 443 345 451 36 338 285 122 158 31 401 213 263 127 84 176 320 301 377 38 205 11 279 219 134 357 351 328 438 37 353 149 490 89 281 467 270 309 3 119 306 324 43 303 79 203 367 354 57 424 155 476 197 135 26 408 417 366 355 393 325 331 314 334 415 48 321 24 166 45 231 343 118 121 259 266 333 217 233 181 115 297 389 52 107 254 349 95 483 358 346 470 59 81 313 485 85 340 344 472 427 114 257 156 108 348 54 100 123 71 312 323 99 432 223 265 105 12 337 487 452 232 455 132 104 227 25 273 185 494 110 465 362 129 295 179 327 397 255 444 212 157 88 425 200 416 466 50 16 459 164 204 419 310 449 493 291 23 359 375 474 386 454 192 61 456 42 414 272 290 160 242 14 448 260 500 368 7 422 2 218 152 30 106 174 133 445 240"
TEST5		= "125 334 398 111 218 440 484 341 50 298 124 381 63 400 264 189 460 31 137 120 23 261 266 40 367 387 319 172 221 91 257 131 309 252 211 457 477 483 454 449 424 200 173 222 67 248 140 435 404 493 186 223 332 135 438 16 219 338 33 179 241 325 8 470 410 431 154 107 74 370 337 472 324 417 340 262 5 90 212 357 413 369 246 226 121 296 240 188 474 155 386 441 274 158 265 141 235 497 150 482 405 233 374 402 382 432 455 347 393 58 464 373 289 391 3 6 207 117 425 269 73 317 399 243 26 302 326 468 312 348 500 491 152 480 82 354 142 56 89 133 342 238 260 350 94 465 453 216 169 383 345 39 277 7 251 255 199 426 256 395 100 359 9 396 17 422 59 64 178 267 96 78 379 70 273 122 101 463 336 415 481 86 45 270 38 228 60 21 103 414 239 167 366 308 461 55 394 294 148 168 316 442 278 272 201 54 275 130 377 191 27 43 57 147 20 284 4 297 315 170 204 378 146 459 127 471 104 185 46 362 295 19 485 427 487 418 495 313 83 25 112 447 198 416 163 138 36 380 343 105 42 92 389 81 114 106 71 205 195 320 331 247 156 283 136 299 13 139 68 230 129 160 234 181 35 61 102 118 356 196 339 184 486 430 473 456 237 358 300 407 37 10 281 144 85 292 419 476 496 329 190 327 145 22 303 165 244 462 288 490 280 166 176 72 157 116 66 276 392 375 499 421 202 406 30 1 433 360 210 401 194 428 475 88 14 29 48 446 450 282 328 151 489 291 242 458 285 208 397 306 310 408 115 203 69 28 363 443 279 220 322 77 467 143 372 231 41 62 109 333 123 290 65 113 249 93 301 119 174 412 429 352 436 34 445 258 215 305 15 76 388 250 108 149 488 287 95 183 353 75 323 371 18 97 403 466 434 182 80 164 232 159 214 47 53 437 344 52 478 498 365 307 376 192 236 126 171 384 321 79 361 423 409 177 224 227 229 494 175 134 187 110 263 213 132 225 217 355 44 162 245 12 452 469 49 390 259 385 335 153 2 318 11 51 451 180 420 193 209 32 206 311 84 197 286 268 98 349 87 411 304 254 330 253 346 99 479 314 24 448 444 128 492 439 271 161 293 351 368 364"

# **************************************************************************** #
#                                    Comands                                   #
# **************************************************************************** #

all: verify $(LIBFT) $(ARQUIVE)
	@echo "✅ Tudo está atualizado!"

$(LIBFT):
	@$(MAKE) -C $(LIBFT_PATH)

$(ARQUIVE): $(OBJS) $(LIBFT)
	@$(AR) $(ARQUIVE) $(OBJS)
	@$(CC) $(CFLAGS) $(ARQUIVE) $(LIBFT) -o $(EXEC)
	@printf "\n$(C_GREEN)Success to created the executable $(C_STD)$(EXEC)\n\n"

%.o: %.c
	@$(CC) $(CFLAGS) -I $(INC) -c $< -o $@
	@printf "Compiling $(C_YELLOW)$<$(C_STD)...\n"

test:
	@numbers=$(TEST1) ./test.sh
	@numbers=$(TEST2) ./test.sh
	@numbers=$(TEST3) ./test.sh
	@numbers=$(TEST4) ./test.sh
	@numbers=$(TEST5) ./test.sh

help:
	@printf "\n$(C_MAGENTA)MAKE TYPES$(C_STD)\n\n"
	@printf "[$(C_GREEN)pr$(C_STD)] = Print the sorted array;\n"
	@printf "[$(C_GREEN)cop$(C_STD)] = Show the amount of each operation.\n\n"

verify:
	@if test ! -d "$(LIBFT_PATH)"; then $(MAKE) get_libft; \
		else printf "\n$(C_GREEN)Libft folder exist!$(C_STD)\n\n"; fi
	@$(MAKE) update_modules

update_modules:
	@printf "$(C_BLUE)Updating repository...$(C_STD)\n"
# @git submodule init
# @git submodule update --recursive --remote
	@printf "$(C_BLUE)Repository updated!$(C_STD)\n\n"

get_libft:
	@echo "Cloning Libft"
	@git clone $(LIBFT_URL) $(LIBFT_PATH)
	@echo "Libft clone successfully downloaded"

clean:
	@rm -rf $(OBJS)

fclean: clean
	@rm -rf $(ARQUIVE) $(EXEC)

re: fclean all
